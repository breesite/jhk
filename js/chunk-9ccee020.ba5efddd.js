(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ccee020"],{"0039":function(e,t,n){"use strict";n("8ded")},1511:function(e,t,n){"use strict";n.r(t);var c=n("7a23");Object(c["P"])("data-v-2780bdb1");var i={id:"scene-container"},l={class:"fluid-content"},a={class:"user-center"},o={class:"userinfo-wrap"},s={class:"tabs-wrap"},r={key:0,class:"pane-content"},d={key:0,class:"pane-content"},u={key:0,class:"pane-content"};function b(e,t,n,b,v,j){var O=Object(c["V"])("Masthead"),f=Object(c["V"])("UserInfo"),p=Object(c["V"])("UserPosts"),m=Object(c["V"])("el-tab-pane"),M=Object(c["V"])("MoviesFavorite"),g=Object(c["V"])("MoviesHistory"),h=Object(c["V"])("el-tabs"),k=Object(c["V"])("Footer");return Object(c["M"])(),Object(c["m"])(c["b"],null,[Object(c["q"])(O),Object(c["n"])("div",i,[Object(c["n"])("div",l,[Object(c["n"])("div",a,[Object(c["n"])("div",o,[Object(c["q"])(f,{"user-id":b.userId},null,8,["user-id"])]),Object(c["n"])("div",s,[Object(c["q"])(h,{modelValue:b.activeName,"onUpdate:modelValue":t[0]||(t[0]=function(e){return b.activeName=e}),class:"ant-tabs"},{default:Object(c["kb"])((function(){return[Object(c["q"])(m,{label:"发布",name:"posts"},{default:Object(c["kb"])((function(){return["posts"===b.activeName?(Object(c["M"])(),Object(c["m"])("div",r,[Object(c["q"])(p,{userId:b.userId},null,8,["userId"])])):Object(c["l"])("",!0)]})),_:1}),Object(c["q"])(m,{label:"收藏",name:"favorite"},{default:Object(c["kb"])((function(){return["favorite"===b.activeName?(Object(c["M"])(),Object(c["m"])("div",d,[Object(c["q"])(M,{userId:b.userId},null,8,["userId"])])):Object(c["l"])("",!0)]})),_:1}),j.self?(Object(c["M"])(),Object(c["k"])(m,{key:0,label:"记录",name:"history"},{default:Object(c["kb"])((function(){return["history"===b.activeName?(Object(c["M"])(),Object(c["m"])("div",u,[Object(c["q"])(g,{userId:b.userId},null,8,["userId"])])):Object(c["l"])("",!0)]})),_:1})):Object(c["l"])("",!0)]})),_:1},8,["modelValue"])])])])]),Object(c["q"])(k)],64)}Object(c["N"])();n("a9e3"),n("ac1f"),n("5319");var v=n("6c02"),j=n("6d5e"),O=n("28b6"),f=n("77e9"),p=n("31f0");n("b0c0");Object(c["P"])("data-v-0347cc0c");var m={key:1},M=Object(c["n"])("div",{class:"title"},"最近消息",-1),g=["infinite-scroll-disabled"],h=["href"],k={alt:"avatar",class:"user-avatar"},y=["onClick"],P={class:"flex-row"},_={class:"user-name text-ellipsis"},V={class:"flex-row"},I={key:0,class:"badge"},w={class:"meta"},N=["innerHTML"];function q(e,t,n,i,l,a){var o,s=Object(c["V"])("Skeleton"),r=Object(c["V"])("Empty"),d=Object(c["V"])("LoadingSpinner"),u=Object(c["W"])("lazyload"),b=Object(c["W"])("infinite-scroll");return Object(c["M"])(),Object(c["m"])("div",null,[i.loading?(Object(c["M"])(),Object(c["k"])(s,{key:0,type:"comments"})):null!==(o=i.chats)&&void 0!==o&&o.length?(Object(c["M"])(),Object(c["m"])("div",m,[M,Object(c["lb"])(Object(c["n"])("ul",{class:"chat-list","infinite-scroll-disabled":!i.hasMorePages},[(Object(c["M"])(!0),Object(c["m"])(c["b"],null,Object(c["T"])(i.chats,(function(e){var t,n,l;return Object(c["M"])(),Object(c["m"])("li",{key:null===e||void 0===e?void 0:e.id,class:"flex-row chat-item"},[Object(c["n"])("a",{href:"/user/"+(null===e||void 0===e||null===(t=e.withUser)||void 0===t?void 0:t.id),class:"avatar"},[Object(c["lb"])(Object(c["n"])("img",k,null,512),[[u,null===e||void 0===e||null===(n=e.withUser)||void 0===n?void 0:n.avatar]])],8,h),Object(c["n"])("a",{href:"javascript:void(0)",onClick:Object(c["nb"])((function(t){return i.toChatPage(e)}),["prevent"]),class:"chat-info"},[Object(c["n"])("div",P,[Object(c["n"])("div",_,Object(c["Z"])((null===e||void 0===e?void 0:e.subject)||(null===e||void 0===e||null===(l=e.withUser)||void 0===l?void 0:l.name)),1),Object(c["n"])("div",V,[null!==e&&void 0!==e&&e.unreads?(Object(c["M"])(),Object(c["m"])("span",I,Object(c["Z"])(a.unreads((null===e||void 0===e?void 0:e.unreads)||0)),1)):Object(c["l"])("",!0),Object(c["n"])("span",w,Object(c["Z"])(null===e||void 0===e?void 0:e.time_ago),1)])]),Object(c["n"])("p",{class:"last-message text-ellipsis",innerHTML:a.lastMessage(e)},null,8,N)],8,y)])})),128))],8,g),[[b,i.loadMore]])])):(Object(c["M"])(),Object(c["k"])(r,{key:2,type:"content",description:"暂无内容"})),i.loadingMore?(Object(c["M"])(),Object(c["k"])(d,{key:3})):Object(c["l"])("",!0)])}Object(c["N"])();var S=n("5502"),R=n("4995"),Z=n("a504"),x=n("a684"),L=n("0d27"),U=n("2d5b"),C=n("02bc"),T=n("d76c"),E={name:"Chats",components:{Skeleton:U["a"],Empty:C["default"],LoadingSpinner:T["a"]},setup:function(){var e,t,n,i=Object(S["b"])(),l=Object(c["R"])(null===(e=i.state)||void 0===e||null===(t=e.user)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.id),a=Object(x["Z"])({user_id:l.value},{enabled:!!l.value}),o=a.chats,s=a.loading,r=a.loadMore,d=a.loadingMore,u=a.hasMorePages,b=function(e){var t;null!==e&&void 0!==e&&null!==(t=e.withUser)&&void 0!==t&&t.id?window.location.href="/chat?chat_id=".concat(null===e||void 0===e?void 0:e.id):R["a"].error("聊天对象丢失!")};return{chats:o,loading:s,loadMore:r,loadingMore:d,hasMorePages:u,toChatPage:b}},methods:{unreads:function(e){return L["a"].transNumber(e)},lastMessage:function(e){var t;return Object(Z["b"])((null===e||void 0===e||null===(t=e.lastMessage)||void 0===t?void 0:t.message)||(null!==e&&void 0!==e&&e.last_message_id?"":"“还没有发过消息”"))}}};n("0039");E.render=q,E.__scopeId="data-v-0347cc0c";var H=E;Object(c["P"])("data-v-259f159b");var Q={key:0,class:"placeholder"},W={key:1,class:"content"},F={class:"title"},J=["infinite-scroll-disabled"],z=["src"],$={class:"flex-row"},A=["href"],B={class:"meta"},D={class:"meta"},G={class:"notification-desc"};function K(e,t,n,i,l,a){var o,s=Object(c["V"])("Skeleton"),r=Object(c["V"])("router-link"),d=Object(c["V"])("Empty"),u=Object(c["V"])("LoadingSpinner"),b=Object(c["W"])("infinite-scroll");return Object(c["M"])(),Object(c["m"])("div",null,[i.loading?(Object(c["M"])(),Object(c["m"])("div",Q,[(Object(c["M"])(),Object(c["m"])(c["b"],null,Object(c["T"])(4,(function(e){return Object(c["n"])("div",{key:e},[Object(c["q"])(s,{type:"media"})])})),64))])):null!==(o=i.notifications)&&void 0!==o&&o.length?(Object(c["M"])(),Object(c["m"])("div",W,[Object(c["n"])("div",F,Object(c["Z"])(i.isQueryLiked?"点赞":"评论")+"通知",1),Object(c["lb"])(Object(c["n"])("ul",{class:"notification-list","infinite-scroll-disabled":i.disabled},[(Object(c["M"])(!0),Object(c["m"])(c["b"],null,Object(c["T"])(i.notifications,(function(e){var t;return Object(c["M"])(),Object(c["m"])("li",{key:null===e||void 0===e?void 0:e.id,class:"notification-item"},[Object(c["n"])("img",{src:null===e||void 0===e?void 0:e.data_cover,alt:"cover",class:"notification-cover"},null,8,z),Object(c["q"])(r,{to:"/user/"+(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id),class:"notification-info"},{default:Object(c["kb"])((function(){var t,n;return[Object(c["n"])("div",$,[Object(c["n"])("a",{href:"/user/"+(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id),class:"user-info text-ellipsis"},[Object(c["p"])(Object(c["Z"])(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.name)+" ",1),Object(c["n"])("span",B,Object(c["Z"])(null===e||void 0===e?void 0:e.type),1)],8,A),Object(c["n"])("span",D,Object(c["Z"])(null===e||void 0===e?void 0:e.time_ago),1)]),Object(c["n"])("p",G,Object(c["Z"])(null===e||void 0===e?void 0:e.data_description),1)]})),_:2},1032,["to"])])})),128))],8,J),[[b,i.loadMore]])])):(Object(c["M"])(),Object(c["k"])(d,{key:2,type:"content",description:"暂无通知"})),i.loadingMore?(Object(c["M"])(),Object(c["k"])(u,{key:3})):Object(c["l"])("",!0)])}Object(c["N"])();var X=n("f685"),Y=n("d257"),ee={props:{type:String},components:{Skeleton:U["a"],Empty:C["default"],LoadingSpinner:T["a"]},setup:function(e){var t,n,i=Object(c["cb"])(e),l=i.type,a=Object(c["R"])("like"===l.value),o=Object(X["d"])(a?x["x"]:x["j"],{page:1}),s=o.result,r=o.loading,d=o.fetchMore,u=Object(X["e"])(s,[],(function(e){var t;return null===e||void 0===e||null===(t=e.notifications)||void 0===t?void 0:t.data})),b=Object(X["e"])(s,{},(function(e){var t;return null===e||void 0===e||null===(t=e.notifications)||void 0===t?void 0:t.paginatorInfo})),v=Object(c["R"])(null===(t=b.value)||void 0===t?void 0:t.currentPage),j=Object(c["R"])(null===(n=b.value)||void 0===n?void 0:n.hasMorePages);Object(c["ib"])(b,(function(e,t){v.value=null===e||void 0===e?void 0:e.currentPage,j.value=null===e||void 0===e?void 0:e.hasMorePages}));var O=Object(c["R"])(!1),f=Object(c["i"])((function(){return r.value||O.value||!j.value}));function p(){O.value=!0,d({variables:{page:v.value+1},updateQuery:function(e,t){var n=t.fetchMoreResult;return O.value=!1,n?Object(Y["c"])(e,n):e}})}return{isQueryLiked:a,loading:r,notifications:u,loadMore:p,disabled:f,loadingMore:O,hasMorePages:j}}};n("a56f");ee.render=K,ee.__scopeId="data-v-259f159b";var te=ee;Object(c["P"])("data-v-2683ed10");var ne={key:0,class:"placeholder"},ce={key:1},ie=Object(c["n"])("div",{class:"title"},"系统通知",-1),le=["infinite-scroll-disabled"],ae=["src"],oe={class:"notice-info"},se={class:"notice-title"},re={class:"notice-desc"},de={class:"expires-time"};function ue(e,t,n,i,l,a){var o,s=Object(c["V"])("Skeleton"),r=Object(c["V"])("Empty"),d=Object(c["V"])("LoadingSpinner"),u=Object(c["W"])("infinite-scroll");return Object(c["M"])(),Object(c["m"])("div",null,[i.loading?(Object(c["M"])(),Object(c["m"])("div",ne,[(Object(c["M"])(),Object(c["m"])(c["b"],null,Object(c["T"])(4,(function(e){return Object(c["n"])("div",{key:e},[Object(c["q"])(s,{type:"media"})])})),64))])):null!==(o=i.publicNotices)&&void 0!==o&&o.length?(Object(c["M"])(),Object(c["m"])("div",ce,[ie,Object(c["lb"])(Object(c["n"])("ul",{class:"notice-list","infinite-scroll-disabled":i.disabled},[(Object(c["M"])(!0),Object(c["m"])(c["b"],null,Object(c["T"])(i.publicNotices,(function(e){var t;return Object(c["M"])(),Object(c["m"])("li",{key:null===e||void 0===e?void 0:e.id,class:"notice-item"},[Object(c["n"])("img",{src:null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.avatar,alt:"cover",class:"notice-cover"},null,8,ae),Object(c["n"])("div",oe,[Object(c["n"])("p",se,Object(c["Z"])(null===e||void 0===e?void 0:e.title),1),Object(c["n"])("p",re,Object(c["Z"])(null===e||void 0===e?void 0:e.content),1),Object(c["n"])("p",de,Object(c["Z"])(null===e||void 0===e?void 0:e.expires_at)+"过期",1)])])})),128))],8,le),[[u,i.loadMore]])])):(Object(c["M"])(),Object(c["k"])(r,{key:2,type:"content",description:"暂无内容"})),i.loadingMore?(Object(c["M"])(),Object(c["k"])(d,{key:3})):Object(c["l"])("",!0)])}Object(c["N"])();var be={components:{Skeleton:U["a"],Empty:C["default"],LoadingSpinner:T["a"]},setup:function(){var e,t,n=Object(X["d"])(x["C"],{page:1}),i=n.result,l=n.loading,a=(n.error,n.fetchMore),o=Object(X["e"])(i,[],(function(e){var t;return null===e||void 0===e||null===(t=e.notices)||void 0===t?void 0:t.data})),s=Object(X["e"])(i,{},(function(e){var t;return null===e||void 0===e||null===(t=e.notices)||void 0===t?void 0:t.paginatorInfo})),r=Object(c["R"])(null===(e=s.value)||void 0===e?void 0:e.currentPage),d=Object(c["R"])(null===(t=s.value)||void 0===t?void 0:t.hasMorePages);Object(c["ib"])(s,(function(e,t){r.value=null===e||void 0===e?void 0:e.currentPage,d.value=null===e||void 0===e?void 0:e.hasMorePages}));var u=Object(c["R"])(!1),b=Object(c["i"])((function(){return l.value||u.value||!d.value}));function v(){u.value=!0,a({variables:{page:r.value+1},updateQuery:function(e,t){var n=t.fetchMoreResult;return u.value=!1,n?Object(Y["c"])(e,n):e}})}return{publicNotices:o,loading:l,loadMore:v,disabled:b,loadingMore:u,hasMorePages:d}}};n("7d62");be.render=ue,be.__scopeId="data-v-2683ed10";var ve=be,je={posts:"posts",favorite:"favorite",history:"history",chat:"chat",comment:"comment",like:"like",notice:"notice"},Oe={components:{UserInfo:j["a"],UserPosts:O["a"],MoviesFavorite:f["a"],MoviesHistory:p["a"],Chats:H,Notifications:te,PublicNotifications:ve},props:["params","query"],setup:function(e){var t,n,i=Object(c["cb"])(e),l=i.params,a=i.query,o=Object(c["R"])(Number(null===(t=l.value)||void 0===t?void 0:t.id)),s=Object(c["R"])(je[String(null===(n=a.value)||void 0===n?void 0:n.tab)]||je.posts),r=Object(v["d"])();return Object(c["ib"])(a,(function(e,t){s.value=je[String(null===e||void 0===e?void 0:e.tab)]||je.posts})),Object(c["ib"])(s,(function(e,t){r.replace({query:{tab:s.value}})})),{userId:o,activeName:s}},computed:{me:function(){return this.$store.state.user.user},self:function(){var e;return this.userId===(null===(e=this.me)||void 0===e?void 0:e.id)}}};n("8614");Oe.render=b,Oe.__scopeId="data-v-2780bdb1";t["default"]=Oe},"7d62":function(e,t,n){"use strict";n("f27f")},8614:function(e,t,n){"use strict";n("f29d")},"8ded":function(e,t,n){},a56f:function(e,t,n){"use strict";n("bef0")},bef0:function(e,t,n){},f27f:function(e,t,n){},f29d:function(e,t,n){}}]);
//# sourceMappingURL=chunk-9ccee020.ba5efddd.js.map